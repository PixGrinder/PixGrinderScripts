plugin simpleObject Sangle
name:"Sangle"
classID:#(0x17f40447, 0x86135701)
category:"H135"
(
	local theTriMesh = triMesh()
	local originalSize = 0.305058
	function buildTriMesh =
	(
		v_arr =  #([0.0180369,0.0194305,-0.140584], [-0.0196865,0.0193671,-0.138925], [-0.0196865,0.0226188,-0.117454], [0.0180369,0.0226817,-0.119113], [0.0180369,0.0830252,-0.150227], [-0.0196865,0.0829277,-0.148564], [-0.0196865,0.0946524,-0.128381], [0.0180369,0.0947504,-0.130045], [0.0180369,0.119374,-0.195935], [-0.0196865,0.119374,-0.194767], [-0.0196865,0.142717,-0.18926], [0.0180369,0.142717,-0.190427], [0.0180369,0.107579,-0.250869], [-0.0196865,0.107702,-0.252184], [-0.0196865,0.126786,-0.267074], [0.0180369,0.126664,-0.265761], [0.0180369,0.0488786,-0.279643], [-0.0196865,0.0488786,-0.281004], [-0.0196865,0.0488786,-0.304556], [0.0180369,0.0488786,-0.303194], [0.0180369,0.0161533,-0.267528], [-0.0196865,0.0133509,-0.268836], [-0.0196865,-0.000760913,-0.286292], [0.0180369,-0.000760917,-0.284984], [0.0180369,-0.0133971,-0.211809], [-0.0196865,-0.0133971,-0.21141], [-0.0196865,-0.0364067,-0.213844], [0.0180369,-0.0364067,-0.214241], [0.0180369,0.00606248,-0.135903], [-0.0196865,0.00606249,-0.136374], [-0.0196865,-0.0149082,-0.130905], [0.0180369,-0.0149082,-0.130435], [-0.0357109,-0.0321447,-0.149474], [-0.0196865,0.00590397,-0.0981219], [0.0180369,0.00590397,-0.0986962], [0.0180369,-0.00794506,-0.0990262], [-0.0196865,-0.00794505,-0.098118], [0.0180369,-0.0071597,0.000502616], [-0.0196865,0.00691541,0.000502616], [-0.025063,0.0233355,-0.0980813], [0.0323228,-0.0321447,-0.149474], [-0.0357109,0.032231,-0.149474], [0.0180369,0.00691541,0.000502616], [-0.0196865,-0.0071597,0.000502616], [0.0251799,-0.0253935,-0.0980814], [0.0323228,0.032231,-0.149474], [-0.0250631,-0.0253935,-0.0980813], [0.0251799,0.0233355,-0.0980814])
		f_arr =  #([6,5,1], [1,2,6], [7,6,2], [2,3,7], [8,7,3], [3,4,8], [5,8,4], [4,1,5], [10,9,5], [5,6,10], [11,10,6], [6,7,11], [12,11,7], [7,8,12], [9,12,8], [8,5,9], [14,13,9], [9,10,14], [15,14,10], [10,11,15], [16,15,11], [11,12,16], [13,16,12], [12,9,13], [18,17,13], [13,14,18], [19,18,14], [14,15,19], [20,19,15], [15,16,20], [17,20,16], [16,13,17], [22,21,17], [17,18,22], [23,22,18], [18,19,23], [24,23,19], [19,20,24], [21,24,20], [20,17,21], [26,25,21], [21,22,26], [27,26,22], [22,23,27], [28,27,23], [23,24,28], [25,28,24], [24,21,25], [30,29,25], [25,26,30], [31,30,26], [26,27,31], [32,31,27], [27,28,32], [29,32,28], [28,25,29], [47,33,41], [41,45,47], [37,36,38], [38,44,37], [35,34,39], [39,43,35], [33,47,40], [40,42,33], [38,36,35], [35,43,38], [39,34,37], [37,44,39], [43,39,44], [44,38,43], [45,41,46], [46,48,45], [48,46,42], [42,40,48], [48,40,47], [47,45,48], [46,41,33], [33,42,46])
		setMesh theTriMesh verts:v_arr faces:f_arr
		theEdgeVis = #(#(1, #{3}), #(2, #{3}), #(3, #{3}), #(4, #{3}), #(5, #{3}), #(6, #{3}), #(7, #{3}), #(8, #{3}), #(9, #{3}), #(10, #{3}), #(11, #{3}), #(12, #{3}), #(13, #{3}), #(14, #{3}), #(15, #{3}), #(16, #{3}), #(17, #{3}), #(18, #{3}), #(19, #{3}), #(20, #{3}), #(21, #{3}), #(22, #{3}), #(23, #{3}), #(24, #{3}), #(25, #{3}), #(26, #{3}), #(27, #{3}), #(28, #{3}), #(29, #{3}), #(30, #{3}), #(31, #{3}), #(32, #{3}), #(33, #{3}), #(34, #{3}), #(35, #{3}), #(36, #{3}), #(37, #{3}), #(38, #{3}), #(39, #{3}), #(40, #{3}), #(41, #{3}), #(42, #{3}), #(43, #{3}), #(44, #{3}), #(45, #{3}), #(46, #{3}), #(47, #{3}), #(48, #{3}), #(49, #{3}), #(50, #{3}), #(51, #{3}), #(52, #{3}), #(53, #{3}), #(54, #{3}), #(55, #{3}), #(56, #{3}), #(57, #{3}), #(58, #{3}), #(59, #{3}), #(60, #{3}), #(61, #{3}), #(62, #{3}), #(63, #{3}), #(64, #{3}), #(65, #{3}), #(66, #{3}), #(67, #{3}), #(68, #{3}), #(69, #{3}), #(70, #{3}), #(71, #{3}), #(72, #{3}), #(73, #{3}), #(74, #{3}), #(75, #{3}), #(76, #{3}), #(77, #{3}), #(78, #{3}))
		theSmoothGroups = #(1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, -2147483648, -2147483648, 0, 0, 0, 0, -2147483648, -2147483648, 0, 0, 0, 0, 0, 0, -2147483648, -2147483648, -2147483648, -2147483648, 0, 0, 0, 0)
		theMatIDs = #(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2)
		theNumMaps = 3
		theMapSupport = #(false, true, true)
		theNumMapVerts = #(undefined, 66, 48)
		theNumMapFaces = #(undefined, 78, 78)
		theMapVerts = #()
		theMapFaces = #()
		theMapVerts[1] = undefined
		theMapFaces[1] = undefined
		theMapVerts[2] = #([0.002,0.002,0], [0.16595,0.002,0], [0.329899,0.002,0], [0.493849,0.002,0], [0.657799,0.002,0], [0.002,0.0959801,0], [0.16595,0.0959801,0], [0.329899,0.0959801,0], [0.493849,0.0959801,0], [0.657799,0.0959801,0], [0.002,0.189134,0], [0.16595,0.189134,0], [0.329899,0.189134,0], [0.493849,0.189134,0], [0.657799,0.189134,0], [0.002,0.282008,0], [0.16595,0.282008,0], [0.329899,0.282008,0], [0.493849,0.282008,0], [0.657799,0.282008,0], [0.002,0.386154,0], [0.16595,0.386154,0], [0.329899,0.386154,0], [0.493849,0.386154,0], [0.657799,0.386154,0], [0.002,0.447189,0], [0.16595,0.447189,0], [0.329899,0.447189,0], [0.493849,0.447189,0], [0.657799,0.447189,0], [0.002,0.545408,0], [0.16595,0.545408,0], [0.329899,0.545408,0], [0.493849,0.545408,0], [0.657799,0.545408,0], [0.002,0.657799,0], [0.16595,0.657799,0], [0.329899,0.657799,0], [0.493849,0.657799,0], [0.657799,0.657799,0], [0.685747,0.534394,0], [0.825615,0.00310837,-0.0163756], [0.908403,0.00313399,0.0874721], [0.913563,0.306274,0.0306031], [0.819991,0.307201,-0.0867537], [0.673015,0.305939,-0.0167174], [0.666385,0.002,-0.0931512], [0.002,0.990784,0], [0.690999,0.340837,0], [0.877266,0.337521,0], [0.761979,0.00301523,0.0266118], [0.756159,0.306041,0.0931512], [0.148325,0.909602,0], [0.887622,0.533987,0], [0.299539,0.908785,0], [0.431613,0.998,0], [0.0126935,0.672564,0], [0.146777,0.764227,0], [0.303606,0.760352,0], [0.422008,0.666385,0], [0.443027,0.687318,0], [0.555521,0.681932,0], [0.556943,0.724431,0], [0.445312,0.730009,0], [0.971586,0.002,-0.0931512], [0.978216,0.305939,-0.0167174])
		theMapFaces[2] = #([7,6,1], [1,2,7], [8,7,2], [2,3,8], [9,8,3], [3,4,9], [10,9,4], [4,5,10], [12,11,6], [6,7,12], [13,12,7], [7,8,13], [14,13,8], [8,9,14], [15,14,9], [9,10,15], [17,16,11], [11,12,17], [18,17,12], [12,13,18], [19,18,13], [13,14,19], [20,19,14], [14,15,20], [22,21,16], [16,17,22], [23,22,17], [17,18,23], [24,23,18], [18,19,24], [25,24,19], [19,20,25], [27,26,21], [21,22,27], [28,27,22], [22,23,28], [29,28,23], [23,24,29], [30,29,24], [24,25,30], [32,31,26], [26,27,32], [33,32,27], [27,28,33], [34,33,28], [28,29,34], [35,34,29], [29,30,35], [37,36,31], [31,32,37], [38,37,32], [32,33,38], [39,38,33], [33,34,39], [40,39,34], [34,35,40], [53,48,56], [56,55,53], [43,42,45], [45,44,43], [51,47,46], [46,52,51], [48,53,58], [58,57,48], [45,42,51], [51,52,45], [66,65,43], [43,44,66], [62,61,64], [64,63,62], [55,56,60], [60,59,55], [59,60,57], [57,58,59], [59,58,53], [53,55,59], [49,41,54], [54,50,49])
		theMapVerts[3] = #([56.3476,-6.9525,13.175], [56.3108,-6.95493,13.1718], [56.3125,-6.95526,13.1528], [56.3493,-6.95283,13.1561], [56.344,-6.89638,13.1737], [56.3073,-6.89884,13.1705], [56.3085,-6.89168,13.1514], [56.3452,-6.88923,13.1546], [56.3384,-6.85867,13.2075], [56.3016,-6.86054,13.2046], [56.3011,-6.84126,13.1963], [56.3379,-6.83938,13.1993], [56.3357,-6.86052,13.2565], [56.2987,-6.86235,13.2557], [56.2972,-6.84373,13.2657], [56.3342,-6.8419,13.2664], [56.3395,-6.90675,13.2902], [56.3026,-6.9095,13.2897], [56.3021,-6.90491,13.3098], [56.339,-6.90216,13.3103], [56.3412,-6.9366,13.2847], [56.3044,-6.94094,13.2844], [56.3051,-6.95166,13.3018], [56.3419,-6.94732,13.3021], [56.3488,-6.96875,13.2412], [56.3121,-6.97352,13.2394], [56.3145,-6.99287,13.2451], [56.3512,-6.9881,13.2468], [56.3498,-6.96323,13.1728], [56.3131,-6.96806,13.1719], [56.3156,-6.98683,13.1704], [56.3523,-6.982,13.1713], [5.53144,-0.700725,2.04038], [5.53289,-0.698134,2.03488], [5.53657,-0.697783,2.03528], [5.53665,-0.69914,2.03556], [5.533,-0.699491,2.03513], [5.5379,-0.700895,2.02588], [5.53414,-0.699866,2.0252], [5.53197,-0.696723,2.03521], [5.5372,-0.700139,2.04102], [5.53128,-0.695149,2.03936], [5.53782,-0.699515,2.02563], [5.53425,-0.701246,2.02548], [5.53741,-0.70031,2.03655], [5.5366,-0.694691,2.03996], [5.53255,-0.700952,2.03583], [5.53688,-0.696158,2.03553])
		theMapFaces[3] = #([6,5,1], [1,2,6], [7,6,2], [2,3,7], [8,7,3], [3,4,8], [5,8,4], [4,1,5], [10,9,5], [5,6,10], [11,10,6], [6,7,11], [12,11,7], [7,8,12], [9,12,8], [8,5,9], [14,13,9], [9,10,14], [15,14,10], [10,11,15], [16,15,11], [11,12,16], [13,16,12], [12,9,13], [18,17,13], [13,14,18], [19,18,14], [14,15,19], [20,19,15], [15,16,20], [17,20,16], [16,13,17], [22,21,17], [17,18,22], [23,22,18], [18,19,23], [24,23,19], [19,20,24], [21,24,20], [20,17,21], [26,25,21], [21,22,26], [27,26,22], [22,23,27], [28,27,23], [23,24,28], [25,28,24], [24,21,25], [30,29,25], [25,26,30], [31,30,26], [26,27,31], [32,31,27], [27,28,32], [29,32,28], [28,25,29], [47,33,41], [41,45,47], [37,36,38], [38,44,37], [35,34,39], [39,43,35], [33,47,40], [40,42,33], [38,36,35], [35,43,38], [39,34,37], [37,44,39], [43,39,44], [44,38,43], [45,41,46], [46,48,45], [48,46,42], [42,40,48], [48,40,47], [47,45,48], [46,41,33], [33,42,46])
		for f in theEdgeVis do for i in f[2] do
			setEdgeVis theTriMesh f[1] i false
		for f = 1 to getNumFaces theTriMesh do
		(
			setFaceSmoothGroup theTriMesh f theSmoothGroups[f]
			setFaceMatID theTriMesh f theMatIDs[f]
		)
		meshOp.setNumMaps theTriMesh theNumMaps keep:false
		for n = 1 to theNumMaps do
		(
			local supp = theMapSupport[n]
			meshOp.setMapSupport theTriMesh (n - 1) supp
			if supp do
			(
				local numMV = theNumMapVerts[n]
				local numMF = theNumMapFaces[n]
				meshOp.setNumMapVerts theTriMesh (n - 1) numMV
				meshOp.setNumMapFaces theTriMesh (n - 1) numMF
				for v = 1 to numMV do
					meshOp.setMapVert theTriMesh (n - 1) v theMapVerts[n][v]
				for f = 1 to numMF do
					meshOp.setMapFace theTriMesh (n - 1) f theMapFaces[n][f]
			)
		)
	)
	parameters main rollout:params
	(
		size type:#worldUnits ui:size default:0.305058
	)
	rollout params "Parameters"
	(
		fn showLocation =
		(
			rollout rltLoc ""
			(
				local theLoc = getSourceFileName()
				local w = (getTextExtent theLoc).x + 26
				button done "" align:#left offset:[-8,0]
				on rltLoc open do
				(
					rltLoc.width = w
					done.caption = theLoc
				)
				on done pressed do destroyDialog rltLoc
			)
			createDialog rltLoc modal:true style:#(#style_border)
		)
		spinner size "Size:" type:#worldUnits range:[0,10000,0] align:#center
		button orSz "Original Size" width:94
		button shLoc "Show Location" toolTip:"plugin's file"width:94
		on orSz pressed do size.value = originalSize
		on shLoc pressed do showLocation()
	)
	on create do buildTriMesh()
	on load do buildTriMesh()
	on clone orig do buildTriMesh()
	on buildMesh do
	(
		theMesh = copy theTriMesh
		local theScale = size / originalSize
		scale theMesh [theScale, theScale, theScale]
		setMesh mesh theMesh
	)
	tool create
	(
		on mousePoint click do
		case click of
		(
			1: (size = 0; coordSys grid (nodeTM.translation = gridPoint))
			2: #stop
		)
		on mouseMove click do
		case click of
		(
			2: size = 2 * length gridDist
		)
	)
)
