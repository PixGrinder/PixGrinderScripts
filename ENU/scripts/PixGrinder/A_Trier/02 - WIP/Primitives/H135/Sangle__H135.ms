plugin simpleObject Sangle_
name:"Sangle_"
classID:#(0x77f8e191, 0xa22899f7)
category:"H135"
(
	local theTriMesh = triMesh()
	local originalSize = 0.305714
	function buildTriMesh =
	(
		v_arr =  #([0.0172181,0.02114,0.140745], [-0.0197906,0.0214509,0.139792], [-0.0197906,0.0247544,0.118793], [0.0172181,0.0244426,0.118793], [0.0172181,0.0846976,0.150545], [-0.0197906,0.0849752,0.149589], [-0.0197906,0.0967464,0.129422], [0.0172181,0.0964707,0.130379], [0.0172181,0.120681,0.196368], [-0.0197906,0.121547,0.195908], [-0.0197906,0.144898,0.190453], [0.0172181,0.144031,0.190913], [0.0172181,0.108985,0.251279], [-0.0197906,0.109473,0.253301], [-0.0197906,0.128509,0.268233], [0.0172181,0.128021,0.266212], [0.0172181,0.0500449,0.279857], [-0.0197906,0.0494575,0.281922], [-0.0197906,0.0506209,0.30546], [0.0172181,0.0512103,0.303394], [0.0172181,0.0175075,0.267672], [-0.0197906,0.0150708,0.26968], [-0.0197906,-0.00049695,0.28708], [0.0172181,0.00193778,0.285073], [0.0172181,-0.0104171,0.211824], [-0.0197906,-0.0130444,0.212124], [-0.0197906,-0.0360719,0.214471], [0.0172181,-0.0334435,0.214172], [0.0172181,0.00938598,0.136009], [-0.0197906,0.00652877,0.137176], [-0.0197906,-0.0144349,0.131633], [0.0172181,-0.0115777,0.130467], [-0.0333195,-0.0310613,0.149878], [-0.0190907,0.00757495,0.0986786], [0.0180569,0.00819007,0.0986786], [0.0181179,-0.00568208,0.0986786], [-0.0188007,-0.00625619,0.0986786], [0.018095,-0.00632676,-0.000141829], [-0.019083,0.00715533,-0.000253886], [-0.0284843,0.0241202,0.0986786], [0.0333195,-0.0295602,0.149878], [-0.031496,0.0338706,0.149878], [0.0180912,0.00771419,-8.84235e-005], [-0.0187893,-0.00695714,-3.59714e-005], [0.0276546,-0.0221797,0.0986786], [0.0300121,0.0342826,0.149878], [-0.0284843,-0.0246926,0.0986786], [0.0276546,0.0265473,0.0986786])
		f_arr =  #([6,2,1], [1,5,6], [7,3,2], [2,6,7], [8,4,3], [3,7,8], [5,1,4], [4,8,5], [10,6,5], [5,9,10], [11,7,6], [6,10,11], [12,8,7], [7,11,12], [9,5,8], [8,12,9], [14,10,9], [9,13,14], [15,11,10], [10,14,15], [16,12,11], [11,15,16], [13,9,12], [12,16,13], [18,14,13], [13,17,18], [19,15,14], [14,18,19], [20,16,15], [15,19,20], [17,13,16], [16,20,17], [22,18,17], [17,21,22], [23,19,18], [18,22,23], [24,20,19], [19,23,24], [21,17,20], [20,24,21], [26,22,21], [21,25,26], [27,23,22], [22,26,27], [28,24,23], [23,27,28], [25,21,24], [24,28,25], [30,26,25], [25,29,30], [31,27,26], [26,30,31], [32,28,27], [27,31,32], [29,25,28], [28,32,29], [47,45,41], [41,33,47], [37,44,38], [38,36,37], [35,43,39], [39,34,35], [33,42,40], [40,47,33], [38,43,35], [35,36,38], [39,44,37], [37,34,39], [43,38,44], [44,39,43], [45,48,46], [46,41,45], [48,40,42], [42,46,48], [48,45,47], [47,40,48], [46,42,33], [33,41,46])
		setMesh theTriMesh verts:v_arr faces:f_arr
		theEdgeVis = #(#(1, #{3}), #(2, #{3}), #(3, #{3}), #(4, #{3}), #(5, #{3}), #(6, #{3}), #(7, #{3}), #(8, #{3}), #(9, #{3}), #(10, #{3}), #(11, #{3}), #(12, #{3}), #(13, #{3}), #(14, #{3}), #(15, #{3}), #(16, #{3}), #(17, #{3}), #(18, #{3}), #(19, #{3}), #(20, #{3}), #(21, #{3}), #(22, #{3}), #(23, #{3}), #(24, #{3}), #(25, #{3}), #(26, #{3}), #(27, #{3}), #(28, #{3}), #(29, #{3}), #(30, #{3}), #(31, #{3}), #(32, #{3}), #(33, #{3}), #(34, #{3}), #(35, #{3}), #(36, #{3}), #(37, #{3}), #(38, #{3}), #(39, #{3}), #(40, #{3}), #(41, #{3}), #(42, #{3}), #(43, #{3}), #(44, #{3}), #(45, #{3}), #(46, #{3}), #(47, #{3}), #(48, #{3}), #(49, #{3}), #(50, #{3}), #(51, #{3}), #(52, #{3}), #(53, #{3}), #(54, #{3}), #(55, #{3}), #(56, #{3}), #(57, #{3}), #(58, #{3}), #(59, #{3}), #(60, #{3}), #(61, #{3}), #(62, #{3}), #(63, #{3}), #(64, #{3}), #(65, #{3}), #(66, #{3}), #(67, #{3}), #(68, #{3}), #(69, #{3}), #(70, #{3}), #(71, #{3}), #(72, #{3}), #(73, #{3}), #(74, #{3}), #(75, #{3}), #(76, #{3}), #(77, #{3}), #(78, #{3}))
		theSmoothGroups = #(1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 2, 2, -2147483648, -2147483648, 0, 0, 0, 0, -2147483648, -2147483648, 0, 0, 0, 0, 0, 0, -2147483648, -2147483648, -2147483648, -2147483648, 0, 0, 0, 0)
		theMatIDs = #(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2)
		theNumMaps = 3
		theMapSupport = #(false, true, true)
		theNumMapVerts = #(undefined, 66, 48)
		theNumMapFaces = #(undefined, 78, 78)
		theMapVerts = #()
		theMapFaces = #()
		theMapVerts[1] = undefined
		theMapFaces[1] = undefined
		theMapVerts[2] = #([0.002,0.002,0], [0.16595,0.002,0], [0.329899,0.002,0], [0.493849,0.002,0], [0.657799,0.002,0], [0.002,0.0959801,0], [0.16595,0.0959801,0], [0.329899,0.0959801,0], [0.493849,0.0959801,0], [0.657799,0.0959801,0], [0.002,0.189134,0], [0.16595,0.189134,0], [0.329899,0.189134,0], [0.493849,0.189134,0], [0.657799,0.189134,0], [0.002,0.282008,0], [0.16595,0.282008,0], [0.329899,0.282008,0], [0.493849,0.282008,0], [0.657799,0.282008,0], [0.002,0.386154,0], [0.16595,0.386154,0], [0.329899,0.386154,0], [0.493849,0.386154,0], [0.657799,0.386154,0], [0.002,0.447189,0], [0.16595,0.447189,0], [0.329899,0.447189,0], [0.493849,0.447189,0], [0.657799,0.447189,0], [0.002,0.545408,0], [0.16595,0.545408,0], [0.329899,0.545408,0], [0.493849,0.545408,0], [0.657799,0.545408,0], [0.002,0.657799,0], [0.16595,0.657799,0], [0.329899,0.657799,0], [0.493849,0.657799,0], [0.657799,0.657799,0], [0.685747,0.534394,0], [0.825615,0.00310837,-0.0163756], [0.908403,0.00313399,0.0874721], [0.913563,0.306274,0.0306031], [0.819991,0.307201,-0.0867537], [0.673015,0.305939,-0.0167174], [0.666385,0.002,-0.0931512], [0.002,0.990784,0], [0.690999,0.340837,0], [0.877266,0.337521,0], [0.761979,0.00301523,0.0266118], [0.756159,0.306041,0.0931512], [0.148325,0.909602,0], [0.887622,0.533987,0], [0.299539,0.908785,0], [0.431613,0.998,0], [0.0126935,0.672564,0], [0.146777,0.764227,0], [0.303606,0.760352,0], [0.422008,0.666385,0], [0.443027,0.687318,0], [0.555521,0.681932,0], [0.556943,0.724431,0], [0.445312,0.730009,0], [0.971586,0.002,-0.0931512], [0.978216,0.305939,-0.0167174])
		theMapFaces[2] = #([7,2,1], [1,6,7], [8,3,2], [2,7,8], [9,4,3], [3,8,9], [10,5,4], [4,9,10], [12,7,6], [6,11,12], [13,8,7], [7,12,13], [14,9,8], [8,13,14], [15,10,9], [9,14,15], [17,12,11], [11,16,17], [18,13,12], [12,17,18], [19,14,13], [13,18,19], [20,15,14], [14,19,20], [22,17,16], [16,21,22], [23,18,17], [17,22,23], [24,19,18], [18,23,24], [25,20,19], [19,24,25], [27,22,21], [21,26,27], [28,23,22], [22,27,28], [29,24,23], [23,28,29], [30,25,24], [24,29,30], [32,27,26], [26,31,32], [33,28,27], [27,32,33], [34,29,28], [28,33,34], [35,30,29], [29,34,35], [37,32,31], [31,36,37], [38,33,32], [32,37,38], [39,34,33], [33,38,39], [40,35,34], [34,39,40], [53,55,56], [56,48,53], [43,44,45], [45,42,43], [51,52,46], [46,47,51], [48,57,58], [58,53,48], [45,52,51], [51,42,45], [66,44,43], [43,65,66], [62,63,64], [64,61,62], [55,59,60], [60,56,55], [59,58,57], [57,60,59], [59,55,53], [53,58,59], [49,50,54], [54,41,49])
		theMapVerts[3] = #([56.3476,-6.9525,13.175], [56.3108,-6.95493,13.1718], [56.3125,-6.95526,13.1528], [56.3493,-6.95283,13.1561], [56.344,-6.89638,13.1737], [56.3073,-6.89884,13.1705], [56.3085,-6.89168,13.1514], [56.3452,-6.88923,13.1546], [56.3384,-6.85867,13.2075], [56.3016,-6.86054,13.2046], [56.3011,-6.84126,13.1963], [56.3379,-6.83938,13.1993], [56.3357,-6.86052,13.2565], [56.2987,-6.86235,13.2557], [56.2972,-6.84373,13.2657], [56.3342,-6.8419,13.2664], [56.3395,-6.90675,13.2902], [56.3026,-6.9095,13.2897], [56.3021,-6.90491,13.3098], [56.339,-6.90216,13.3103], [56.3412,-6.9366,13.2847], [56.3044,-6.94094,13.2844], [56.3051,-6.95166,13.3018], [56.3419,-6.94732,13.3021], [56.3488,-6.96875,13.2412], [56.3121,-6.97352,13.2394], [56.3145,-6.99287,13.2451], [56.3512,-6.9881,13.2468], [56.3498,-6.96323,13.1728], [56.3131,-6.96806,13.1719], [56.3156,-6.98683,13.1704], [56.3523,-6.982,13.1713], [5.53144,-0.700725,2.04038], [5.53289,-0.698134,2.03488], [5.53657,-0.697783,2.03528], [5.53665,-0.69914,2.03556], [5.533,-0.699491,2.03513], [5.5379,-0.700895,2.02588], [5.53414,-0.699866,2.0252], [5.53197,-0.696723,2.03521], [5.5372,-0.700139,2.04102], [5.53128,-0.695149,2.03936], [5.53782,-0.699515,2.02563], [5.53425,-0.701246,2.02548], [5.53741,-0.70031,2.03655], [5.5366,-0.694691,2.03996], [5.53255,-0.700952,2.03583], [5.53688,-0.696158,2.03553])
		theMapFaces[3] = #([6,2,1], [1,5,6], [7,3,2], [2,6,7], [8,4,3], [3,7,8], [5,1,4], [4,8,5], [10,6,5], [5,9,10], [11,7,6], [6,10,11], [12,8,7], [7,11,12], [9,5,8], [8,12,9], [14,10,9], [9,13,14], [15,11,10], [10,14,15], [16,12,11], [11,15,16], [13,9,12], [12,16,13], [18,14,13], [13,17,18], [19,15,14], [14,18,19], [20,16,15], [15,19,20], [17,13,16], [16,20,17], [22,18,17], [17,21,22], [23,19,18], [18,22,23], [24,20,19], [19,23,24], [21,17,20], [20,24,21], [26,22,21], [21,25,26], [27,23,22], [22,26,27], [28,24,23], [23,27,28], [25,21,24], [24,28,25], [30,26,25], [25,29,30], [31,27,26], [26,30,31], [32,28,27], [27,31,32], [29,25,28], [28,32,29], [47,45,41], [41,33,47], [37,44,38], [38,36,37], [35,43,39], [39,34,35], [33,42,40], [40,47,33], [38,43,35], [35,36,38], [39,44,37], [37,34,39], [43,38,44], [44,39,43], [45,48,46], [46,41,45], [48,40,42], [42,46,48], [48,45,47], [47,40,48], [46,42,33], [33,41,46])
		for f in theEdgeVis do for i in f[2] do
			setEdgeVis theTriMesh f[1] i false
		for f = 1 to getNumFaces theTriMesh do
		(
			setFaceSmoothGroup theTriMesh f theSmoothGroups[f]
			setFaceMatID theTriMesh f theMatIDs[f]
		)
		meshOp.setNumMaps theTriMesh theNumMaps keep:false
		for n = 1 to theNumMaps do
		(
			local supp = theMapSupport[n]
			meshOp.setMapSupport theTriMesh (n - 1) supp
			if supp do
			(
				local numMV = theNumMapVerts[n]
				local numMF = theNumMapFaces[n]
				meshOp.setNumMapVerts theTriMesh (n - 1) numMV
				meshOp.setNumMapFaces theTriMesh (n - 1) numMF
				for v = 1 to numMV do
					meshOp.setMapVert theTriMesh (n - 1) v theMapVerts[n][v]
				for f = 1 to numMF do
					meshOp.setMapFace theTriMesh (n - 1) f theMapFaces[n][f]
			)
		)
	)
	parameters main rollout:params
	(
		size type:#worldUnits ui:size default:0.305714
	)
	rollout params "Parameters"
	(
		fn showLocation =
		(
			rollout rltLoc ""
			(
				local theLoc = getSourceFileName()
				local w = (getTextExtent theLoc).x + 26
				button done "" align:#left offset:[-8,0]
				on rltLoc open do
				(
					rltLoc.width = w
					done.caption = theLoc
				)
				on done pressed do destroyDialog rltLoc
			)
			createDialog rltLoc modal:true style:#(#style_border)
		)
		spinner size "Size:" type:#worldUnits range:[0,10000,0] align:#center
		button orSz "Original Size" width:94
		button shLoc "Show Location" toolTip:"plugin's file"width:94
		on orSz pressed do size.value = originalSize
		on shLoc pressed do showLocation()
	)
	on create do buildTriMesh()
	on load do buildTriMesh()
	on clone orig do buildTriMesh()
	on buildMesh do
	(
		theMesh = copy theTriMesh
		local theScale = size / originalSize
		scale theMesh [theScale, theScale, theScale]
		setMesh mesh theMesh
	)
	tool create
	(
		on mousePoint click do
		case click of
		(
			1: (size = 0; coordSys grid (nodeTM.translation = gridPoint))
			2: #stop
		)
		on mouseMove click do
		case click of
		(
			2: size = 2 * length gridDist
		)
	)
)
