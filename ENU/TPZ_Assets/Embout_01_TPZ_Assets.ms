plugin simpleObject Embout_01
name:"Embout_01"
classID:#(0xd295f0b, 0xe3aa46b)
category:"TPZ_Assets"
(
	local theTriMesh = triMesh()
	local originalSize = 0.372868
	function buildTriMesh =
	(
		v_arr =  #([0.0572152,-0.0598235,0.0843687], [-0.0236121,-0.0801784,0.0850487], [-0.0816529,-0.0203549,0.0855369], [-0.0588665,0.0598235,0.0853453], [0.0219607,0.0801784,0.0846653], [0.0800016,0.0203549,0.084177], [0.056507,-0.0598235,0.000191674], [-0.0243202,-0.0801784,0.000871643], [-0.0823611,-0.0203549,0.00135992], [-0.0595747,0.0598235,0.00116824], [0.0212526,0.0801784,0.000488266], [0.0792934,0.0203549,0], [0.0389576,-0.0408519,0.10219], [-0.0162372,-0.0547517,0.102654], [-0.0558718,-0.0138998,0.102988], [-0.0403116,0.0408519,0.102857], [0.0148832,0.0547517,0.102393], [0.0545178,0.0138998,0.102059], [0.0674533,-0.0694269,0.190664], [-0.0263491,-0.0930493,0.191344], [-0.0271208,-0.0930493,0.113121], [0.0666816,-0.0694269,0.112441], [-0.0937071,-0.0236224,0.191832], [-0.0944789,-0.0236224,0.113609], [-0.0672629,0.0694269,0.191641], [-0.0680346,0.0694269,0.113418], [0.0265395,0.0930493,0.190961], [0.0257677,0.0930493,0.112738], [0.0938975,0.0236224,0.190472], [0.0931258,0.0236224,0.112249], [0.0571209,-0.0586462,0.205812], [-0.0221158,-0.0786006,0.206387], [-0.0790144,-0.0199543,0.206799], [-0.0566764,0.0586462,0.206637], [0.0225602,0.0786005,0.206063], [0.0794589,0.0199543,0.20565], [0.0421128,-0.0425798,0.274765], [-0.0154165,-0.0570676,0.275182], [-0.0567275,-0.0144878,0.275481], [-0.0405091,0.0425798,0.275364], [0.0170202,0.0570675,0.274947], [0.0583312,0.0144877,0.274647], [0.0512061,-0.0516429,0.310363], [-0.0185684,-0.0692144,0.310869], [-0.0686724,-0.0175715,0.311232], [-0.0490019,0.0516429,0.311089], [0.0207725,0.0692144,0.310584], [0.0708766,0.0175715,0.31022], [0.0446482,-0.0443487,0.372122], [-0.0152711,-0.0594383,0.372556], [-0.0582982,-0.0150896,0.372868], [-0.0414061,0.0443486,0.372746], [0.0185132,0.0594383,0.372311], [0.0615403,0.0150896,0.371999])
		f_arr =  #([1,2,8], [8,7,1], [2,3,9], [9,8,2], [3,4,10], [10,9,3], [4,5,11], [11,10,4], [5,6,12], [12,11,5], [6,1,7], [7,12,6], [8,9,10], [10,11,12], [8,10,12], [7,8,12], [2,1,13], [13,14,2], [3,2,14], [14,15,3], [4,3,15], [15,16,4], [5,4,16], [16,17,5], [6,5,17], [17,18,6], [1,6,18], [18,13,1], [19,20,21], [21,22,19], [20,23,24], [24,21,20], [23,25,26], [26,24,23], [25,27,28], [28,26,25], [27,29,30], [30,28,27], [29,19,22], [22,30,29], [20,19,31], [31,32,20], [23,20,32], [32,33,23], [25,23,33], [33,34,25], [27,25,34], [34,35,27], [29,27,35], [35,36,29], [19,29,36], [36,31,19], [32,31,37], [37,38,32], [33,32,38], [38,39,33], [34,33,39], [39,40,34], [35,34,40], [40,41,35], [36,35,41], [41,42,36], [31,36,42], [42,37,31], [38,37,43], [43,44,38], [39,38,44], [44,45,39], [40,39,45], [45,46,40], [41,40,46], [46,47,41], [42,41,47], [47,48,42], [37,42,48], [48,43,37], [44,43,49], [49,50,44], [45,44,50], [50,51,45], [46,45,51], [51,52,46], [47,46,52], [52,53,47], [48,47,53], [53,54,48], [43,48,54], [54,49,43], [54,53,52], [52,51,50], [54,52,50], [49,54,50], [14,13,22], [22,21,14], [13,18,30], [30,22,13], [18,17,28], [28,30,18], [17,16,26], [26,28,17], [16,15,24], [24,26,16], [15,14,21], [21,24,15])
		setMesh theTriMesh verts:v_arr faces:f_arr
		theEdgeVis = #(#(1, #{3}), #(2, #{3}), #(3, #{3}), #(4, #{3}), #(5, #{3}), #(6, #{3}), #(7, #{3}), #(8, #{3}), #(9, #{3}), #(10, #{3}), #(11, #{3}), #(12, #{3}), #(13, #{3}), #(14, #{3}), #(15, #{1..3}), #(16, #{2}), #(17, #{3}), #(18, #{3}), #(19, #{3}), #(20, #{3}), #(21, #{3}), #(22, #{3}), #(23, #{3}), #(24, #{3}), #(25, #{3}), #(26, #{3}), #(27, #{3}), #(28, #{3}), #(29, #{3}), #(30, #{3}), #(31, #{3}), #(32, #{3}), #(33, #{3}), #(34, #{3}), #(35, #{3}), #(36, #{3}), #(37, #{3}), #(38, #{3}), #(39, #{3}), #(40, #{3}), #(41, #{3}), #(42, #{3}), #(43, #{3}), #(44, #{3}), #(45, #{3}), #(46, #{3}), #(47, #{3}), #(48, #{3}), #(49, #{3}), #(50, #{3}), #(51, #{3}), #(52, #{3}), #(53, #{3}), #(54, #{3}), #(55, #{3}), #(56, #{3}), #(57, #{3}), #(58, #{3}), #(59, #{3}), #(60, #{3}), #(61, #{3}), #(62, #{3}), #(63, #{3}), #(64, #{3}), #(65, #{3}), #(66, #{3}), #(67, #{3}), #(68, #{3}), #(69, #{3}), #(70, #{3}), #(71, #{3}), #(72, #{3}), #(73, #{3}), #(74, #{3}), #(75, #{3}), #(76, #{3}), #(77, #{3}), #(78, #{3}), #(79, #{3}), #(80, #{3}), #(81, #{3}), #(82, #{3}), #(83, #{3}), #(84, #{3}), #(85, #{3}), #(86, #{3}), #(87, #{3}), #(88, #{3}), #(89, #{3}), #(90, #{3}), #(91, #{1..3}), #(92, #{2}), #(93, #{3}), #(94, #{3}), #(95, #{3}), #(96, #{3}), #(97, #{3}), #(98, #{3}), #(99, #{3}), #(100, #{3}), #(101, #{3}), #(102, #{3}), #(103, #{3}), #(104, #{3}))
		theSmoothGroups = #(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 2, 2, 0, 0, 2, 2)
		theMatIDs = #(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4)
		theNumMaps = 2
		theMapSupport = #(false, true)
		theNumMapVerts = #(undefined, 75)
		theNumMapFaces = #(undefined, 104)
		theMapVerts = #()
		theMapFaces = #()
		theMapVerts[1] = undefined
		theMapFaces[1] = undefined
		theMapVerts[2] = #([0.501239,0.57655,0.074612], [0.376057,0.575196,0.0799043], [0.37509,0.742836,0.0826143], [0.500504,0.74419,0.0681298], [0.25331,0.574224,0.0954536], [0.253073,0.741864,0.104532], [0.131046,0.574606,0.0845468], [0.131759,0.742245,0.0911319], [0.748819,0.57596,0.0759799], [0.749798,0.743599,0.073456], [0.624968,0.576932,0.0817136], [0.625216,0.744572,0.0726467], [0.501207,0.541059,-0.270251], [0.376013,0.540134,-0.26636], [0.280567,0.877377,0], [0.210925,0.998,0], [0.0716418,0.998,0], [0.002,0.877377,0], [0.0716418,0.756754,0], [0.210925,0.756754,0], [0.253299,0.53947,-0.255542], [0.131077,0.539731,-0.26306], [0.748863,0.540656,-0.269185], [0.62498,0.54132,-0.265473], [0.502127,0.364862,0.258365], [0.377249,0.363508,0.251486], [0.376335,0.51929,0.254339], [0.501447,0.520644,0.251244], [0.253607,0.362535,0.260363], [0.253379,0.518317,0.270251], [0.130161,0.362917,0.251305], [0.130841,0.518699,0.258426], [0.747626,0.364271,0.254369], [0.748539,0.520053,0.251517], [0.62467,0.365244,0.27022], [0.624898,0.521025,0.260332], [0.50232,0.334694,0.0627953], [0.377511,0.33355,0.0545772], [0.253672,0.332729,0.0603653], [0.129965,0.333051,0.0533919], [0.747365,0.334195,0.0583987], [0.624606,0.335016,0.0734764], [0.503337,0.197374,-0.225012], [0.37891,0.196544,-0.240231], [0.254026,0.195947,-0.242688], [0.128913,0.196182,-0.245111], [0.745986,0.197012,-0.232126], [0.624269,0.197608,-0.214724], [0.503415,0.12648,-0.0568169], [0.379019,0.125472,-0.0761463], [0.254054,0.124749,-0.0797642], [0.12883,0.125033,-0.0824554], [0.745878,0.12604,-0.0658223], [0.624243,0.126764,-0.0441076], [0.504367,0.00348604,-0.185042], [0.380363,0.00262104,-0.210784], [0.254401,0.002,-0.220619], [0.127808,0.00224375,-0.220251], [0.744572,0.00310875,-0.196628], [0.623928,0.00372982,-0.171666], [0.761979,0.0911875,0], [0.814009,0.002,0], [0.917262,0.0024643,0], [0.968485,0.0921161,0], [0.916456,0.181304,0], [0.813203,0.180839,0], [0.00624706,0.57596,0.0759799], [0.00722587,0.743599,0.073456], [0.00629079,0.540656,-0.269185], [0.00505383,0.364271,0.254369], [0.00596766,0.520053,0.251517], [0.00479308,0.334195,0.0583987], [0.00341386,0.197012,-0.232126], [0.00330654,0.12604,-0.0658223], [0.002,0.00310875,-0.196628])
		theMapFaces[2] = #([1,2,3], [3,4,1], [2,5,6], [6,3,2], [5,7,8], [8,6,5], [7,67,68], [68,8,7], [9,11,12], [12,10,9], [11,1,4], [4,12,11], [16,17,18], [18,19,20], [16,18,20], [15,16,20], [2,1,13], [13,14,2], [5,2,14], [14,21,5], [7,5,21], [21,22,7], [67,7,22], [22,69,67], [11,9,23], [23,24,11], [1,11,24], [24,13,1], [25,26,27], [27,28,25], [26,29,30], [30,27,26], [29,31,32], [32,30,29], [31,70,71], [71,32,31], [33,35,36], [36,34,33], [35,25,28], [28,36,35], [26,25,37], [37,38,26], [29,26,38], [38,39,29], [31,29,39], [39,40,31], [70,31,40], [40,72,70], [35,33,41], [41,42,35], [25,35,42], [42,37,25], [38,37,43], [43,44,38], [39,38,44], [44,45,39], [40,39,45], [45,46,40], [72,40,46], [46,73,72], [42,41,47], [47,48,42], [37,42,48], [48,43,37], [44,43,49], [49,50,44], [45,44,50], [50,51,45], [46,45,51], [51,52,46], [73,46,52], [52,74,73], [48,47,53], [53,54,48], [43,48,54], [54,49,43], [50,49,55], [55,56,50], [51,50,56], [56,57,51], [52,51,57], [57,58,52], [74,52,58], [58,75,74], [54,53,59], [59,60,54], [49,54,60], [60,55,49], [62,63,64], [64,65,66], [62,64,66], [61,62,66], [14,13,28], [28,27,14], [13,24,36], [36,28,13], [24,23,34], [34,36,24], [69,22,32], [32,71,69], [22,21,30], [30,32,22], [21,14,27], [27,30,21])
		for f in theEdgeVis do for i in f[2] do
			setEdgeVis theTriMesh f[1] i false
		for f = 1 to getNumFaces theTriMesh do
		(
			setFaceSmoothGroup theTriMesh f theSmoothGroups[f]
			setFaceMatID theTriMesh f theMatIDs[f]
		)
		meshOp.setNumMaps theTriMesh theNumMaps keep:false
		for n = 1 to theNumMaps do
		(
			local supp = theMapSupport[n]
			meshOp.setMapSupport theTriMesh (n - 1) supp
			if supp do
			(
				local numMV = theNumMapVerts[n]
				local numMF = theNumMapFaces[n]
				meshOp.setNumMapVerts theTriMesh (n - 1) numMV
				meshOp.setNumMapFaces theTriMesh (n - 1) numMF
				for v = 1 to numMV do
					meshOp.setMapVert theTriMesh (n - 1) v theMapVerts[n][v]
				for f = 1 to numMF do
					meshOp.setMapFace theTriMesh (n - 1) f theMapFaces[n][f]
			)
		)
	)
	parameters main rollout:params
	(
		size type:#worldUnits ui:size default:0.372868
	)
	rollout params "Parameters"
	(
		fn showLocation =
		(
			rollout rltLoc ""
			(
				local theLoc = getSourceFileName()
				local w = (getTextExtent theLoc).x + 26
				button done "" align:#left offset:[-8,0]
				on rltLoc open do
				(
					rltLoc.width = w
					done.caption = theLoc
				)
				on done pressed do destroyDialog rltLoc
			)
			createDialog rltLoc modal:true style:#(#style_border)
		)
		spinner size "Size:" type:#worldUnits range:[0,10000,0] align:#center
		button orSz "Original Size" width:94
		button shLoc "Show Location" toolTip:"plugin's file"width:94
		on orSz pressed do size.value = originalSize
		on shLoc pressed do showLocation()
	)
	on create do buildTriMesh()
	on load do buildTriMesh()
	on clone orig do buildTriMesh()
	on buildMesh do
	(
		theMesh = copy theTriMesh
		local theScale = size / originalSize
		scale theMesh [theScale, theScale, theScale]
		setMesh mesh theMesh
	)
	tool create
	(
		on mousePoint click do
		case click of
		(
			1: (size = 0; coordSys grid (nodeTM.translation = gridPoint))
			2: #stop
		)
		on mouseMove click do
		case click of
		(
			2: size = 2 * length gridDist
		)
	)
)
